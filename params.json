{"tagline":"Reprap FW with look ahead. SDcard and LCD support. It works on Gen6, Ultimaker, RAMPS and Sanguinololu","note":"Don't delete this file! It's used internally to help with page regeneration.","body":"#This is a fork of the [original Marlin](https://github.com/ErikZalm/Marlin) with a focus on Makergear Mosaic M1 improvements.\r\n\r\nWARNING: \r\n--------\r\nTHIS IS RELEASE CANDIDATE 2 FOR MARLIN 1.0.0\r\n\r\nThe configuration is now split in two files\r\nConfiguration.h for the normal settings\r\nConfiguration_adv.h for the advanced settings\r\n\r\nGen7T is not supported.\r\n\r\nQuick Information\r\n===================\r\nThis RepRap firmware is a mashup between <a href=\"https://github.com/kliment/Sprinter\">Sprinter</a>, <a href=\"https://github.com/simen/grbl/tree\">grbl</a> and many original parts.\r\n\r\nDerived from Sprinter and Grbl by Erik van der Zalm.\r\nSprinters lead developers are Kliment and caru.\r\nGrbls lead developer is Simen Svale Skogsrud. Sonney Jeon (Chamnit) improved some parts of grbl\r\nA fork by bkubicek for the Ultimaker was merged, and further development was aided by him.\r\nSome features have been added by:\r\nLampmaker, Bradley Feldman, and others...\r\n\r\n\r\nFeatures:\r\n\r\n*   Interrupt based movement with real linear acceleration\r\n*   High steprate\r\n*   Look ahead (Keep the speed high when possible. High cornering speed)\r\n*   Interrupt based temperature protection\r\n*   preliminary support for Matthew Roberts advance algorithm \r\n    For more info see: http://reprap.org/pipermail/reprap-dev/2011-May/003323.html\r\n*   Full endstop support\r\n*   SD Card support\r\n*   SD Card folders (works in pronterface)\r\n*   SD Card autostart support\r\n*   LCD support (ideally 20x4) \r\n*   LCD menu system for autonomous SD card printing, controlled by an click-encoder. \r\n*   EEPROM storage of e.g. max-velocity, max-acceleration, and similar variables\r\n*   many small but handy things originating from bkubicek's fork.\r\n*   Arc support\r\n*   Temperature oversampling\r\n*   Dynamic Temperature setpointing aka \"AutoTemp\"\r\n*   Support for QTMarlin, a very beta GUI for PID-tuning and velocity-acceleration testing. https://github.com/bkubicek/QTMarlin\r\n*   Endstop trigger reporting to the host software.\r\n*   Updated sdcardlib\r\n*   Heater power reporting. Useful for PID monitoring.\r\n*   PID tuning\r\n*   CoreXY kinematics (www.corexy.com/theory.html)\r\n\r\nThe default baudrate is 250000. This baudrate has less jitter and hence errors than the usual 115200 baud, but is less supported by drivers and host-environments.\r\n\r\n\r\nDifferences and additions to the already good Sprinter firmware:\r\n================================================================\r\n\r\n*Look-ahead:*\r\n\r\nMarlin has look-ahead. While sprinter has to break and re-accelerate at each corner, \r\nlookahead will only decelerate and accelerate to a velocity, \r\nso that the change in vectorial velocity magnitude is less than the xy_jerk_velocity.\r\nThis is only possible, if some future moves are already processed, hence the name. \r\nIt leads to less over-deposition at corners, especially at flat angles.\r\n\r\n*Arc support:*\r\n\r\nSlic3r can find curves that, although broken into segments, were ment to describe an arc.\r\nMarlin is able to print those arcs. The advantage is the firmware can choose the resolution,\r\nand can perform the arc with nearly constant velocity, resulting in a nice finish. \r\nAlso, less serial communication is needed.\r\n\r\n*Temperature Oversampling:*\r\n\r\nTo reduce noise and make the PID-differential term more useful, 16 ADC conversion results are averaged.\r\n\r\n*AutoTemp:*\r\n\r\nIf your gcode contains a wide spread of extruder velocities, or you realtime change the building speed, the temperature should be changed accordingly.\r\nUsually, higher speed requires higher temperature.\r\nThis can now be performed by the AutoTemp function\r\nBy calling M109 S<mintemp> T<maxtemp> F<factor> you enter the autotemp mode.\r\n\r\nYou can leave it by calling M109 without any F.\r\nIf active, the maximal extruder stepper rate of all buffered moves will be calculated, and named \"maxerate\" [steps/sec].\r\nThe wanted temperature then will be set to t=tempmin+factor*maxerate, while being limited between tempmin and tempmax.\r\nIf the target temperature is set manually or by gcode to a value less then tempmin, it will be kept without change.\r\nIdeally, your gcode can be completely free of temperature controls, apart from a M109 S T F in the start.gcode, and a M109 S0 in the end.gcode.\r\n\r\n*EEPROM:*\r\n\r\nIf you know your PID values, the acceleration and max-velocities of your unique machine, you can set them, and finally store them in the EEPROM.\r\nAfter each reboot, it will magically load them from EEPROM, independent what your Configuration.h says.\r\n\r\n*LCD Menu:*\r\n\r\nIf your hardware supports it, you can build yourself a LCD-CardReader+Click+encoder combination. It will enable you to realtime tune temperatures,\r\naccelerations, velocities, flow rates, select and print files from the SD card, preheat, disable the steppers, and do other fancy stuff.\r\nOne working hardware is documented here: http://www.thingiverse.com/thing:12663 \r\nAlso, with just a 20x4 or 16x2 display, useful data is shown.\r\n\r\n*SD card folders:*\r\n\r\nIf you have an SD card reader attached to your controller, also folders work now. Listing the files in pronterface will show \"/path/subpath/file.g\".\r\nYou can write to file in a subfolder by specifying a similar text using small letters in the path.\r\nAlso, backup copies of various operating systems are hidden, as well as files not ending with \".g\".\r\n\r\n*SD card folders:*\r\n\r\nIf you place a file auto[0-9].g into the root of the sd card, it will be automatically executed if you boot the printer. The same file will be executed by selecting \"Autostart\" from the menu.\r\nFirst *0 will be performed, than *1 and so on. That way, you can heat up or even print automatically without user interaction.\r\n\r\n*Endstop trigger reporting:*\r\n\r\nIf an endstop is hit while moving towards the endstop, the location at which the firmware thinks that the endstop was triggered is outputed on the serial port.\r\nThis is useful, because the user gets a warning message.\r\nHowever, also tools like QTMarlin can use this for finding acceptable combinations of velocity+acceleration.\r\n\r\n*Coding paradigm:*\r\n\r\nNot relevant from a user side, but Marlin was split into thematic junks, and has tried to partially enforced private variables.\r\nThis is intended to make it clearer, what interacts which what, and leads to a higher level of modularization.\r\nWe think that this is a useful prestep for porting this firmware to e.g. an ARM platform in the future.\r\nA lot of RAM (with enabled LCD ~2200 bytes) was saved by storing char []=\"some message\" in Program memory.\r\nIn the serial communication, a #define based level of abstraction was enforced, so that it is clear that\r\nsome transfer is information (usually beginning with \"echo:\"), an error \"error:\", or just normal protocol,\r\nnecessary for backwards compatibility.\r\n\r\n*Interrupt based temperature measurements:*\r\n\r\nAn interrupt is used to manage ADC conversions, and enforce checking for critical temperatures.\r\nThis leads to less blocking in the heater management routine.\r\n\r\n\r\nNon-standard M-Codes, different to an old version of sprinter:\r\n==============================================================\r\nMovement:\r\n\r\n*   G2  - CW ARC\r\n*   G3  - CCW ARC\r\n\r\nGeneral:\r\n\r\n*   M17  - Enable/Power all stepper motors. Compatibility to ReplicatorG.\r\n*   M18  - Disable all stepper motors; same as M84.Compatibility to ReplicatorG.\r\n*   M30  - Print time since last M109 or SD card start to serial\r\n*   M42  - Change pin status via gcode\r\n*   M80  - Turn on Power Supply\r\n*   M81  - Turn off Power Supply\r\n*   M114 - Output current position to serial port \r\n*   M119 - Output Endstop status to serial port\r\n\r\nMovement variables:\r\n\r\n*   M202 - Set max acceleration in units/s^2 for travel moves (M202 X1000 Y1000) Unused in Marlin!!\r\n*   M203 - Set maximum feedrate that your machine can sustain (M203 X200 Y200 Z300 E10000) in mm/sec\r\n*   M204 - Set default acceleration: S normal moves T filament only moves (M204 S3000 T7000) im mm/sec^2  also sets minimum segment time in ms (B20000) to prevent buffer underruns and M20 minimum feedrate\r\n*   M206 - set home offsets.  This sets the X,Y,Z coordinates of the endstops (and is added to the {X,Y,Z}_HOME_POS configuration options (and is also added to the coordinates, if any, provided to G82, as with earlier firmware)\r\n*   M220 - set build speed mulitplying S:factor in percent ; aka \"realtime tuneing in the gcode\". So you can slow down if you have islands in one height-range, and speed up otherwise.\r\n*   M221 - set the extrude multiplying S:factor in percent\r\n*   M400 - Finish all buffered moves.\r\n\r\nTemperature variables:\r\n*   M301 - Set PID parameters P I and D\r\n*   M302 - Allow cold extrudes\r\n*   M303 - PID relay autotune S<temperature> sets the target temperature. (default target temperature = 150C)\r\n\r\nAdvance:\r\n\r\n*   M200 - Set filament diameter for advance\r\n*   M205 - advanced settings:  minimum travel speed S=while printing T=travel only,  B=minimum segment time X= maximum xy jerk, Z=maximum Z jerk\r\n\r\nEEPROM:\r\n\r\n*   M500 - stores paramters in EEPROM. This parameters are stored:  axis_steps_per_unit,  max_feedrate, max_acceleration  ,acceleration,retract_acceleration,\r\n  minimumfeedrate,mintravelfeedrate,minsegmenttime,  jerk velocities, PID\r\n*   M501 - reads parameters from EEPROM (if you need reset them after you changed them temporarily).  \r\n*   M502 - reverts to the default \"factory settings\".  You still need to store them in EEPROM afterwards if you want to.\r\n*   M503 - print the current settings (from memory not from eeprom)\r\n\r\nMISC:\r\n\r\n*   M240 - Trigger a camera to take a photograph\r\n*   M999 - Restart after being stopped by error\r\n\r\nConfiguring and compilation:\r\n============================\r\n\r\nInstall the arduino software IDE/toolset v22\r\n   http://www.arduino.cc/en/Main/Software\r\n\r\nFor gen6 and sanguinololu the Sanguino directory in the Marlin dir needs to be copied to the arduino environment.\r\n  copy Marlin\\sanguino <arduino home>\\hardware\\Sanguino\r\n\r\nInstall Ultimaker's RepG 25 build\r\n    http://software.ultimaker.com\r\nFor SD handling and as better substitute (apart from stl manipulation) download\r\nthe very nice Kliment's printrun/pronterface  https://github.com/kliment/Printrun\r\n\r\nCopy the Ultimaker Marlin firmware\r\n   https://github.com/ErikZalm/Marlin/tree/Marlin_v1\r\n   (Use the download button)\r\n\r\nStart the arduino IDE.\r\nSelect Tools -> Board -> Arduino Mega 2560    or your microcontroller\r\nSelect the correct serial port in Tools ->Serial Port\r\nOpen Marlin.pde\r\n\r\nClick the Verify/Compile button\r\n\r\nClick the Upload button\r\nIf all goes well the firmware is uploading\r\n\r\nStart Ultimaker's Custom RepG 25\r\nMake sure Show Experimental Profiles is enabled in Preferences\r\nSelect Sprinter as the Driver\r\n\r\nPress the Connect button.\r\n\r\nKNOWN ISSUES: RepG will display:  Unknown: marlin x.y.z\r\n\r\nThat's ok.  Enjoy Silky Smooth Printing.\r\n\r\n\r\n","name":"Marlin","google":""}